
# 项目名称：高校流浪动物全生命周期管理平台 (Campus Stray Animal Lifecycle Management Platform)

## 1. 项目背景与目标
本项目旨在解决高校校园内流浪动物管理混乱、信息不透明、救助流程不规范的问题。
通过构建一套基于 **B/S 架构** 的信息管理系统，实现对校园流浪动物从**“发现 -> 档案建立 -> 日常投喂/医疗 -> 领养/归宿”**的全生命周期数字化管理。系统不仅记录基础数据，还提供数据统计与可视化功能，辅助校园流浪动物救助社团进行科学决策（如绝育计划制定、经费预算控制）。

## 2. 技术架构 (Technology Stack)

* **前端 (Frontend):**
    * **框架:** Vue.js (Vue 3 + Vite) —— 构建响应式单页面应用 (SPA)。
    * **UI 组件库:** Element Plus 或 Bootstrap —— 快速搭建美观的管理后台界面。
    * **数据交互:** Axios —— 用于发送 HTTP 请求与后端 RESTful API 进行通信。
    * **可视化:** ECharts —— 用于绘制统计图表（饼图、柱状图）。
* **后端 (Backend):**
    * **框架:** Python Flask —— 轻量级 Web 框架，提供 RESTful API 接口。
    * **数据库驱动:** `psycopg2-binary` —— 用于 Python 连接 openGauss 数据库。
    * **认证机制:** JWT (JSON Web Token) —— 实现前后端分离架构下的用户身份认证与权限管理。
* **数据库 (Database):**
    * **核心:** **Huawei openGauss** —— 存储所有业务数据，利用其事务特性保证数据一致性。

## 3. 核心功能模块 (Functional Modules)

为了丰富工作量，系统被划分为四个核心模块，涵盖了普通用户、志愿者和管理员三种角色：

### 3.1 用户与权限模块 (RBAC)
* **注册与登录：** 支持学生通过学号注册，使用 JWT 进行登录状态维持。
* **角色管理：**
    * **普通用户：** 浏览动物档案，提交救助/领养申请。
    * **志愿者：** 记录投喂日志，查看内部医疗记录。
    * **管理员：** 拥有所有数据权限，负责审核领养申请，管理基础数据。

### 3.2 动物档案中心 (Animal Archive)
* **档案管理：** 对流浪动物进行建档，包含照片、昵称、品种、毛色、出没区域等。
* **状态流转：** 维护动物的实时状态（流浪中、住院治疗、待领养、已领养、死亡），状态的变更会触发相应的历史记录。
* **筛选与搜索：** 支持按区域、状态、绝育情况进行多维度筛选。

### 3.3 运维与关怀模块 (Operations & Care) —— *工作量核心*
* **日常投喂记录：** 志愿者打卡记录（谁、在什么时间、喂了哪只猫、喂了什么），形成多对多关联数据。
* **医疗健康日志：** 记录驱虫、疫苗、绝育手术及生病治疗的详细信息。
* **经费统计：** 每一笔医疗记录都关联费用，系统自动计算单只动物的累计花费和社团总支出。

### 3.4 领养审批工作流 (Adoption Workflow) —— *业务逻辑核心*
* **在线申请：** 用户填写领养意向书（包含养宠经验、居住环境等）。
* **审批流程：** 管理员后台查看申请 -> 审核（通过/驳回） -> 若通过，系统自动开启数据库事务，修改动物状态为“已领养”，并锁定该动物不可被他人申请。

### 3.5 数据驾驶舱 (Data Dashboard) —— *满足统计查询要求*
* **绝育率统计：** 饼图展示全校流浪动物绝育比例。
* **区域热力图：** 柱状图展示各个教学楼/宿舍区的流浪动物数量分布。
* **近期开销趋势：** 折线图展示近6个月的医疗经费支出变化。

## 4. 数据库设计 (Database Schema)

基于 openGauss，设计以下 5 张核心数据表，体现**完整性约束**和**外键关联**：

### (1) `users` (用户表)
* `user_id` (PK, Serial): 用户ID
* `username` (Varchar): 用户名/学号
* `password_hash` (Varchar): 加密后的密码
* `role` (Varchar): 角色 (admin/volunteer/user)
* `contact` (Varchar): 联系方式

### (2) `animals` (动物档案表)
* `animal_id` (PK, Serial): 动物ID
* `name` (Varchar): 昵称
* `species` (Varchar): 物种 (Cat/Dog)
* `zone` (Varchar): 常出没区域 (e.g., "Library")
* `status` (Varchar): 状态 (Stray/Adopted/Hospitalized)
* `is_sterilized` (Boolean): 是否绝育 (True/False)
* `photo_url` (Text): 照片路径

### (3) `feed_records` (投喂记录表 - 关联表)
* `record_id` (PK, Serial): 记录ID
* `user_id` (FK -> users.user_id): 谁喂的
* `animal_id` (FK -> animals.animal_id): 喂了谁
* `feed_time` (Timestamp): 投喂时间
* `food_content` (Varchar): 喂了什么

### (4) `health_logs` (医疗记录表)
* `log_id` (PK, Serial): 日志ID
* `animal_id` (FK -> animals.animal_id): 关联动物
* `action_type` (Varchar): 行为类型 (Sterilization/Vaccine/Cure)
* `cost` (Decimal): 花费金额 (**用于统计查询**)
* `log_date` (Date): 记录日期
* `description` (Text): 详细描述

### (5) `adoption_applications` (领养申请表 - 业务表)
* `application_id` (PK, Serial): 申请ID
* `user_id` (FK -> users.user_id): 申请人
* `animal_id` (FK -> animals.animal_id): 申请领养的动物
* `status` (Varchar): 审批状态 (Pending/Approved/Rejected)
* `apply_reason` (Text): 申请理由
* `create_time` (Timestamp): 创建时间

---
