<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>福大校园打卡点 - 红色点位与特色风景</title>
    <link rel="stylesheet" href="../css/common.css">
    <!-- 引入图标库 -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --fd-red: #dc3545;
            --fd-red-dark: #c82333;
            --fd-red-light: #f8d7da;
            --fd-blue: #007bff;
            --fd-blue-dark: #0056b3;
            --fd-blue-light: #d1e7ff;
            --fd-gray: #f8f9fa;
            --fd-dark: #343a40;
            --fd-light: #f1f3f5;
            --fd-green: #28a745;
            --fd-yellow: #ffc107;
            --fd-orange: #fd7e14;
            --fd-purple: #6f42c1;
            --fd-pink: #e83e8c;
            --fd-cyan: #17a2b8;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #fafafa 0%, #f0f2f5 50%, #e9ecef 100%);
            font-family: 'Microsoft YaHei', 'Heiti SC', sans-serif;
            color: var(--fd-dark);
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* 添加装饰性背景元素 */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                    radial-gradient(circle at 10% 20%, rgba(220, 53, 69, 0.03) 0%, transparent 20%),
                    radial-gradient(circle at 90% 30%, rgba(0, 123, 255, 0.03) 0%, transparent 20%),
                    radial-gradient(circle at 50% 80%, rgba(108, 117, 125, 0.02) 0%, transparent 20%);
            z-index: -1;
            pointer-events: none;
        }

        /* 浮动装饰元素 */
        .floating-element {
            position: fixed;
            border-radius: 50%;
            opacity: 0.1;
            z-index: -1;
            animation: float-element 20s infinite linear;
            pointer-events: none;
        }

        .floating-element.red {
            background: var(--fd-red);
            width: 300px;
            height: 300px;
            top: -150px;
            left: -150px;
            animation-delay: 0s;
        }

        .floating-element.blue {
            background: var(--fd-blue);
            width: 200px;
            height: 200px;
            bottom: -100px;
            right: -100px;
            animation-delay: 5s;
        }

        .floating-element.yellow {
            background: var(--fd-yellow);
            width: 150px;
            height: 150px;
            top: 50%;
            right: -75px;
            animation-delay: 10s;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 30px;
            position: relative;
            z-index: 1;
        }

        /* 页面标题 - 3D效果 */
        .page-title {
            text-align: center;
            color: var(--fd-red-dark);
            margin-bottom: 50px;
            font-size: 3rem;
            font-weight: 800;
            position: relative;
            padding-bottom: 25px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .page-title::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--fd-red), var(--fd-blue), transparent);
            border-radius: 2px;
            animation: title-line 3s ease-in-out infinite;
        }

        .page-title::before {
            content: attr(data-text);
            position: absolute;
            top: 2px;
            left: 2px;
            color: rgba(255, 255, 255, 0.3);
            z-index: -1;
            filter: blur(2px);
        }

        .title-icon {
            display: inline-block;
            animation: icon-float 3s ease-in-out infinite;
            margin-right: 15px;
            text-shadow: 0 0 10px rgba(220, 53, 69, 0.3);
        }

        /* 统计概览卡片 - 玻璃拟态效果 */
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
            perspective: 1000px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow:
                    inset 0 0 20px rgba(255, 255, 255, 0.5),
                    0 8px 32px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: var(--transition-slow);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .stat-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 100%);
            z-index: 1;
            pointer-events: none;
        }

        .stat-card:hover {
            transform: translateY(-10px) rotateX(5deg) rotateY(5deg);
            box-shadow:
                    inset 0 0 30px rgba(255, 255, 255, 0.8),
                    0 20px 50px rgba(0, 0, 0, 0.15);
        }

        .stat-icon {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: #fff;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: var(--transition-slow);
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .stat-icon.total {
            background: linear-gradient(135deg, var(--fd-purple), #8a2be2);
        }

        .stat-icon.checked {
            background: linear-gradient(135deg, var(--fd-green), #20c997);
        }

        .stat-icon.rate {
            background: linear-gradient(135deg, var(--fd-blue), #17a2b8);
        }

        .stat-icon.popular {
            background: linear-gradient(135deg, var(--fd-orange), #ff6b35);
        }

        .stat-content {
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 5px;
            background: linear-gradient(135deg, #333, #666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
        }

        .stat-label {
            color: #666;
            font-size: 15px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* 统计数字动画效果 */
        .stat-number {
            display: inline-block;
        }

        /* 筛选栏 - 玻璃拟态 */
        .filter-bar {
            display: flex;
            gap: 15px;
            margin: 0 auto 40px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow:
                    inset 0 0 20px rgba(255, 255, 255, 0.5),
                    0 8px 32px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .filter-btn {
            padding: 12px 28px;
            border: none;
            background: rgba(255, 255, 255, 0.6);
            color: var(--fd-red);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition-slow);
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .filter-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .filter-btn:hover::before {
            left: 100%;
        }

        .filter-btn i {
            font-size: 18px;
            transition: var(--transition);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, var(--fd-red), var(--fd-red-dark));
            color: #fff;
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
            transform: translateY(-3px);
        }

        .filter-btn.active i {
            transform: rotate(15deg);
        }

        .filter-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        /* 打卡点地图区域 - 3D效果 */
        .map-container {
            width: 100%;
            height: auto;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 25px;
            margin: 0 0 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: var(--transition-slow);
            padding: 30px;
            box-shadow:
                    20px 20px 60px rgba(0, 0, 0, 0.1),
                    -20px -20px 60px rgba(255, 255, 255, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.5);
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .map-container:hover {
            transform: translateY(-10px) rotateX(2deg) rotateY(2deg);
            box-shadow:
                    30px 30px 80px rgba(0, 0, 0, 0.15),
                    -30px -30px 80px rgba(255, 255, 255, 0.8);
        }

        .campus-map {
            width: 100%;
            height: auto;
            max-width: 100%;
            object-fit: contain;
            transition: var(--transition-slow);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            filter: saturate(1.1) contrast(1.05);
            transform: translateZ(20px);
        }

        .map-container:hover .campus-map {
            transform: scale(1.02) translateZ(30px);
            filter: saturate(1.2) contrast(1.1);
        }

        /* 地图点位标记 - 增强3D效果 */
        .map-point {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50% 50% 50% 0;
            border: 3px solid #fff;
            cursor: pointer;
            transition: var(--transition-slow);
            z-index: 10;
            transform: translate(-50%, -50%) rotate(-45deg);
            animation: float 3s ease-in-out infinite;
            box-shadow:
                    0 0 20px rgba(0,0,0,0.2),
                    inset 0 0 10px rgba(255,255,255,0.5);
            transform-style: preserve-3d;
        }

        .map-point::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #fff;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
        }

        .map-point:hover {
            transform: translate(-50%, -50%) rotate(-45deg) scale(1.5) translateZ(50px);
            z-index: 20;
        }

        .map-point::after {
            content: attr(data-name);
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) rotate(45deg);
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(50,50,50,0.9));
            color: #fff;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition-slow);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.1);
            min-width: 120px;
            text-align: center;
        }

        .map-point:hover::after {
            opacity: 1;
            bottom: 50px;
        }

        .map-point.red-point {
            background: linear-gradient(135deg, var(--fd-red), var(--fd-red-dark));
            box-shadow:
                    0 0 0 3px var(--fd-red),
                    0 0 30px rgba(220, 53, 69, 0.5);
        }

        .map-point.red-point:hover {
            background: linear-gradient(135deg, var(--fd-red-dark), #b21f2d);
            box-shadow:
                    0 0 0 5px var(--fd-red),
                    0 0 50px rgba(220, 53, 69, 0.8);
        }

        .map-point.blue-point {
            background: linear-gradient(135deg, var(--fd-blue), var(--fd-blue-dark));
            box-shadow:
                    0 0 0 3px var(--fd-blue),
                    0 0 30px rgba(0, 123, 255, 0.5);
        }

        .map-point.blue-point:hover {
            background: linear-gradient(135deg, var(--fd-blue-dark), #004a9c);
            box-shadow:
                    0 0 0 5px var(--fd-blue),
                    0 0 50px rgba(0, 123, 255, 0.8);
        }

        /* 点位脉冲动画 */
        .map-point-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            width: 100%;
            height: 100%;
            border-radius: 50% 50% 50% 0;
            animation: pulse-ring 2s infinite;
            z-index: -1;
            pointer-events: none;
        }

        .map-point-pulse.red-pulse {
            background: radial-gradient(circle, rgba(220, 53, 69, 0.6) 0%, rgba(220, 53, 69, 0.3) 50%, transparent 70%);
        }

        .map-point-pulse.blue-pulse {
            background: radial-gradient(circle, rgba(0, 123, 255, 0.6) 0%, rgba(0, 123, 255, 0.3) 50%, transparent 70%);
        }

        /* 打卡点列表 - 卡片悬停3D效果 */
        .checkin-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 20px;
            perspective: 1000px;
        }

        .checkin-item {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow:
                    inset 0 0 20px rgba(255, 255, 255, 0.5),
                    0 10px 40px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: var(--transition-slow);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform-style: preserve-3d;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .checkin-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 100%);
            z-index: 1;
            pointer-events: none;
        }

        .checkin-item::after {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg,
            var(--fd-red) 0%,
            var(--fd-blue) 25%,
            var(--fd-green) 50%,
            var(--fd-orange) 75%,
            var(--fd-purple) 100%);
            border-radius: 22px;
            z-index: -1;
            opacity: 0;
            transition: var(--transition-slow);
            animation: gradient-border 3s linear infinite;
            background-size: 400% 400%;
        }

        .checkin-item:hover {
            transform: translateY(-15px) rotateX(5deg) rotateY(5deg) scale(1.02);
            box-shadow:
                    inset 0 0 30px rgba(255, 255, 255, 0.8),
                    0 25px 60px rgba(0, 0, 0, 0.15);
        }

        .checkin-item:hover::after {
            opacity: 1;
        }

        /* 已打卡标记 - 增强效果 */
        .checked-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--fd-green), #20c997);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
            transform: rotate(10deg);
            opacity: 0;
            transition: var(--transition-slow);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .checkin-item.checked .checked-badge {
            opacity: 1;
            transform: rotate(0deg);
            animation: badge-pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* 打卡点类型标签 - 悬浮效果 */
        .checkin-item-tag {
            position: absolute;
            top: 25px;
            left: 25px;
            color: #fff;
            font-size: 12px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transform: translateY(0);
            transition: var(--transition);
        }

        .checkin-item:hover .checkin-item-tag {
            transform: translateY(-5px);
        }

        .checkin-item-tag.red {
            background: linear-gradient(135deg, var(--fd-red), var(--fd-red-dark));
        }

        .checkin-item-tag.normal {
            background: linear-gradient(135deg, var(--fd-blue), var(--fd-blue-dark));
        }

        .checkin-item-title {
            color: var(--fd-red-dark);
            font-weight: 700;
            margin: 20px 0 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            padding-right: 30px;
            position: relative;
            z-index: 2;
        }

        .checkin-item-title::before {
            content: "";
            display: inline-block;
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, var(--fd-red), var(--fd-red-dark));
            border-radius: 50%;
            margin-right: 12px;
            box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);
        }

        /* 列表图片 - 悬浮放大效果 */
        .checkin-item-img-container {
            width: 100%;
            height: 220px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
            transform: translateZ(10px);
        }

        .checkin-item-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition-slow);
            filter: brightness(1) contrast(1);
        }

        .checkin-item:hover .checkin-item-img {
            transform: scale(1.15);
            filter: brightness(1.1) contrast(1.1);
        }

        .checkin-item-img-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            opacity: 0;
            transition: var(--transition-slow);
            display: flex;
            align-items: flex-end;
            padding: 25px;
        }

        .checkin-item:hover .checkin-item-img-overlay {
            opacity: 1;
        }

        .checkin-item-img-text {
            color: #fff;
            font-size: 14px;
            transform: translateY(20px);
            transition: var(--transition-slow);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkin-item:hover .checkin-item-img-text {
            transform: translateY(0);
        }

        .checkin-item-desc {
            color: #666;
            font-size: 14px;
            line-height: 1.7;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 20px;
            flex-grow: 1;
            position: relative;
            z-index: 2;
        }

        /* 打卡统计信息区域 - 玻璃拟态 */
        .checkin-item-stats {
            border-top: 1px solid rgba(255, 255, 255, 0.5);
            padding-top: 20px;
            margin-top: auto;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(5px);
            position: relative;
            z-index: 2;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stats-row:last-child {
            margin-bottom: 0;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-label-small {
            font-size: 13px;
            color: #666;
            font-weight: 500;
        }

        .stat-value-small {
            font-weight: 700;
            font-size: 15px;
        }

        .stat-item.checkins .stat-value-small {
            color: var(--fd-purple);
        }

        .stat-item.rate .stat-value-small {
            color: var(--fd-blue);
        }

        .stat-item.rating .stat-value-small {
            color: var(--fd-orange);
        }

        .stat-item.reviews .stat-value-small {
            color: var(--fd-green);
        }

        /* 星星评分样式 - 发光效果 */
        .stars {
            display: flex;
            gap: 3px;
        }

        .star {
            color: #ddd;
            font-size: 16px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            position: relative;
        }

        .star.filled {
            color: var(--fd-yellow);
            text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
            animation: star-twinkle 2s infinite;
        }

        .star.half-filled {
            background: linear-gradient(90deg, var(--fd-yellow) 50%, #ddd 50%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .rating-value {
            font-weight: 700;
            margin-left: 8px;
            color: var(--fd-orange);
            font-size: 16px;
        }

        /* 进度条样式 - 渐变发光 */
        .rate-progress {
            width: 80px;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-left: 8px;
            position: relative;
        }

        .rate-progress::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            animation: progress-shimmer 2s infinite;
        }

        .rate-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--fd-blue), var(--fd-cyan));
            border-radius: 4px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
        }

        /* 详情弹窗 - 增强3D效果 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition-slow);
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9) rotateX(10deg);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            box-shadow:
                    0 25px 100px rgba(0, 0, 0, 0.3),
                    inset 0 0 50px rgba(255, 255, 255, 0.5);
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition-slow);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform-style: preserve-3d;
        }

        .modal.active {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1) rotateX(0deg);
        }

        .modal-header {
            padding: 30px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248, 215, 218, 0.3));
            position: relative;
            z-index: 2;
        }

        .modal-title {
            color: var(--fd-red-dark);
            font-size: 1.8rem;
            margin: 0;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .modal-title i {
            color: var(--fd-red);
            font-size: 1.5em;
            animation: icon-pulse 2s infinite;
        }

        .modal-content {
            padding: 40px;
            overflow-y: auto;
            max-height: calc(90vh - 120px);
            position: relative;
            z-index: 2;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--fd-red);
            color: var(--fd-red);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-slow);
            font-size: 28px;
            font-weight: 300;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.2);
            position: relative;
            overflow: hidden;
        }

        .close-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--fd-red);
            border-radius: 50%;
            transform: scale(0);
            transition: var(--transition-slow);
        }

        .close-btn:hover {
            color: #fff;
            transform: rotate(180deg) scale(1.1);
        }

        .close-btn:hover::before {
            transform: scale(1);
        }

        .close-btn span {
            position: relative;
            z-index: 1;
            transition: var(--transition);
        }

        /* 弹窗图片 - 悬浮效果 */
        .modal-img-container {
            width: 100%;
            height: 350px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow:
                    0 15px 50px rgba(0, 0, 0, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.3);
            position: relative;
            transform: translateZ(20px);
        }

        .modal-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition-slow);
            filter: brightness(1) contrast(1);
        }

        .modal-img-container:hover .modal-img {
            transform: scale(1.05);
            filter: brightness(1.1) contrast(1.1);
        }

        .modal-img-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 700;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
            z-index: 10;
        }

        .modal-img-badge.red-badge {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.9), rgba(194, 24, 91, 0.9));
        }

        .modal-img-badge.blue-badge {
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.9), rgba(26, 35, 126, 0.9));
        }

        /* 弹窗统计信息 - 玻璃拟态 */
        .modal-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow:
                    inset 0 0 20px rgba(255, 255, 255, 0.5),
                    0 8px 32px rgba(0, 0, 0, 0.08);
        }

        .modal-stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.5);
            transition: var(--transition);
        }

        .modal-stat-item:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-5px);
        }

        .modal-stat-value {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #333, #666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-stat-label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .modal-stat-item.checkins .modal-stat-value {
            background: linear-gradient(135deg, var(--fd-purple), #8a2be2);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .modal-stat-item.rate .modal-stat-value {
            background: linear-gradient(135deg, var(--fd-blue), var(--fd-cyan));
            -webkit-background-clip: text;
            background-clip: text;
        }

        .modal-stat-item.rating .modal-stat-value {
            background: linear-gradient(135deg, var(--fd-orange), #ff6b35);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .modal-stat-item.reviews .modal-stat-value {
            background: linear-gradient(135deg, var(--fd-green), #20c997);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .modal-rating-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-top: 8px;
        }

        .modal-star {
            color: var(--fd-yellow);
            font-size: 20px;
            text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
            animation: star-twinkle 3s infinite;
        }

        .modal-star:nth-child(2) { animation-delay: 0.2s; }
        .modal-star:nth-child(3) { animation-delay: 0.4s; }
        .modal-star:nth-child(4) { animation-delay: 0.6s; }
        .modal-star:nth-child(5) { animation-delay: 0.8s; }

        .modal-detail {
            line-height: 1.8;
            color: var(--fd-dark);
            margin-bottom: 35px;
        }

        .modal-desc {
            margin-bottom: 25px;
            font-size: 16px;
            color: #495057;
            text-indent: 2em;
            background: rgba(255, 255, 255, 0.6);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .modal-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .modal-info-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            background: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition);
        }

        .modal-info-item:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-5px);
        }

        .modal-info-item i {
            color: var(--fd-red);
            font-size: 22px;
            margin-top: 5px;
            flex-shrink: 0;
        }

        .modal-info-item strong {
            color: var(--fd-red-dark);
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .modal-info-item span {
            font-size: 15px;
            color: #666;
            line-height: 1.6;
        }

        .modal-tip {
            color: #666;
            font-size: 15px;
            background: linear-gradient(135deg, rgba(255, 248, 225, 0.9), rgba(255, 243, 205, 0.9));
            padding: 25px;
            border-radius: 15px;
            border-left: 6px solid var(--fd-yellow);
            margin-bottom: 35px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .modal-tip i {
            color: var(--fd-yellow);
            font-size: 24px;
            margin-top: 3px;
            flex-shrink: 0;
            animation: icon-pulse 2s infinite;
        }

        /* 打卡按钮 - 3D悬浮效果 */
        .checkin-btn {
            width: 100%;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--fd-red), var(--fd-red-dark));
            color: #fff;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-slow);
            box-shadow:
                    0 10px 30px rgba(220, 53, 69, 0.4),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .checkin-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.7s ease;
        }

        .checkin-btn:hover::before {
            left: 100%;
        }

        .checkin-btn.checked {
            background: linear-gradient(135deg, var(--fd-green), #20c997);
            box-shadow:
                    0 10px 30px rgba(76, 175, 80, 0.4),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .checkin-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow:
                    0 20px 50px rgba(220, 53, 69, 0.6),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .checkin-btn.checked:hover {
            box-shadow:
                    0 20px 50px rgba(76, 175, 80, 0.6),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .checkin-btn i {
            font-size: 22px;
            transition: var(--transition);
        }

        .checkin-btn:hover i {
            transform: rotate(15deg) scale(1.2);
        }

        /* 返回首页按钮 - 悬浮3D效果 */
        .btn-red {
            display: inline-block;
            background: linear-gradient(135deg, var(--fd-red), var(--fd-red-dark));
            color: #fff;
            padding: 15px 40px;
            border-radius: 30px;
            text-decoration: none;
            transition: var(--transition-slow);
            font-weight: 600;
            font-size: 17px;
            box-shadow:
                    0 10px 30px rgba(220, 53, 69, 0.4),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
            margin-top: 60px;
            margin-left: 50%;
            transform: translateX(-50%);
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-red::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.7s ease;
        }

        .btn-red:hover::before {
            left: 100%;
        }

        .btn-red:hover {
            transform: translateX(-50%) translateY(-5px) scale(1.05);
            box-shadow:
                    0 20px 50px rgba(220, 53, 69, 0.6),
                    inset 0 1px 1px rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .btn-red i {
            margin-right: 12px;
            transition: var(--transition);
        }

        .btn-red:hover i {
            transform: translateX(-5px);
        }

        /* 响应式优化 */
        @media (max-width: 1200px) {
            .container {
                max-width: 100%;
                padding: 30px 20px;
            }

            .checkin-list {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 25px;
            }
        }

        @media (max-width: 992px) {
            .page-title {
                font-size: 2.5rem;
            }

            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .checkin-list {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }

            .modal-info {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 2rem;
            }

            .stats-overview {
                grid-template-columns: 1fr;
            }

            .filter-bar {
                padding: 15px;
                gap: 10px;
            }

            .filter-btn {
                padding: 10px 20px;
                font-size: 14px;
            }

            .map-container {
                padding: 20px;
            }

            .checkin-list {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .modal {
                width: 95%;
            }

            .modal-header {
                padding: 20px 25px;
            }

            .modal-content {
                padding: 25px;
            }

            .modal-img-container {
                height: 250px;
            }

            .modal-stats {
                grid-template-columns: repeat(2, 1fr);
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 1.8rem;
                padding-bottom: 15px;
            }

            .container {
                padding: 20px 15px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-icon {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }

            .stat-value {
                font-size: 2rem;
            }

            .map-point {
                width: 24px;
                height: 24px;
            }

            .checkin-item {
                padding: 20px;
            }

            .checkin-item-img-container {
                height: 180px;
            }

            .modal-img-container {
                height: 200px;
            }

            .modal-stats {
                grid-template-columns: 1fr;
            }

            .btn-red {
                padding: 12px 30px;
                font-size: 15px;
            }
        }

        @keyframes title-line {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes icon-float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes icon-pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        @keyframes float {
            0% { transform: translate(-50%, -50%) rotate(-45deg) translateY(0); }
            50% { transform: translate(-50%, -50%) rotate(-45deg) translateY(-15px); }
            100% { transform: translate(-50%, -50%) rotate(-45deg) translateY(0); }
        }

        @keyframes pulse-ring {
            0% {
                transform: translate(-50%, -50%) rotate(-45deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) rotate(-45deg) scale(3);
                opacity: 0;
            }
        }

        @keyframes gradient-border {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes badge-pop {
            0% {
                transform: scale(0) rotate(-30deg);
                opacity: 0;
            }
            80% {
                transform: scale(1.2) rotate(5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes star-twinkle {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        @keyframes progress-shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        /* 滚动动画 - 增强效果 */
        .fade-in {
            opacity: 0;
            transform: translateY(30px) rotateX(10deg);
            transition: var(--transition-slow);
        }

        .fade-in.active {
            opacity: 1;
            transform: translateY(0) rotateX(0deg);
        }

        /* 加载动画 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--fd-red), var(--fd-blue));
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease;
        }

        .loader {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            position: relative;
            animation: loader-rotate 2s linear infinite;
        }

        .loader::before {
            content: "";
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background: linear-gradient(135deg, var(--fd-red), var(--fd-blue));
            border-radius: 50%;
            animation: loader-inner 3s ease-in-out infinite;
        }

        @keyframes loader-rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes loader-inner {
            0%, 100% {
                transform: scale(0.8);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        /* 页面过渡动画 */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--fd-red), var(--fd-blue));
            z-index: 99998;
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page-transition.active {
            transform: translateY(0);
        }
    </style>
</head>
<body>

      <!-- 导航栏 -->
<nav class="navbar">
    <div class="container">
        <div class="navbar-logo">
            <a href="homepage.html" class="logo-link">
                <i class="fas fa-university" style="color: var(--fd-red);"></i>
                <span style="color: var(--fd-blue); font-weight: 700; font-size: 1.2rem;">福州大学</span>
            </a>
        </div>
        <div class="navbar-links">
            <a href="homepage.html" class="nav-link">首页</a>
            <a href="history.html" class="nav-link">红色校史</a>
            <a href="checkin.html" class="nav-link">打卡点</a>
            <a href="college.html" class="nav-link">数字展馆</a>
        </div>
    </div>
</nav>
<!-- 加载动画 -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loader"></div>
</div>

<!-- 页面过渡动画 -->
<div class="page-transition" id="pageTransition"></div>

<!-- 浮动装饰元素 -->
<div class="floating-element red"></div>
<div class="floating-element blue"></div>
<div class="floating-element yellow"></div>
<!-- 粒子效果容器 -->
<div class="particles" id="particlesContainer"></div>

<div class="container">
    <h1 class="page-title fade-in" data-text="福大校园打卡点 - 红色点位与特色风景">
        <i class="fas fa-map-marker-alt title-icon"></i>福大校园打卡点 - 红色点位与特色风景
    </h1>

    <!-- 统计概览 -->
    <div class="stats-overview fade-in">
        <div class="stat-card total-stat">
            <div class="stat-icon total">
                <i class="fas fa-map-pin"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value"><span class="stat-number" id="totalPoints">0</span></div>
                <div class="stat-label">总打卡点数</div>
            </div>
        </div>
        <div class="stat-card checked-stat">
            <div class="stat-icon checked">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value"><span class="stat-number" id="checkedPoints">0</span></div>
                <div class="stat-label">已打卡点数</div>
            </div>
        </div>
        <div class="stat-card rate-stat">
            <div class="stat-icon rate">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value"><span class="stat-number" id="checkinRate">0</span>%</div>
                <div class="stat-label">打卡完成率</div>
            </div>
        </div>
        <div class="stat-card popular-stat">
            <div class="stat-icon popular">
                <i class="fas fa-fire"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="popularPlace">福友阁</div>
                <div class="stat-label">最受欢迎点位</div>
            </div>
        </div>
    </div>

    <!-- 筛选栏 -->
    <div class="filter-bar fade-in">
        <button class="filter-btn active" data-filter="all">
            <i class="fas fa-th-list"></i>全部打卡点
        </button>
        <button class="filter-btn" data-filter="red">
            <i class="fas fa-flag"></i>红色打卡点
        </button>
        <button class="filter-btn" data-filter="normal">
            <i class="fas fa-tree"></i>常规打卡点
        </button>
        <button class="filter-btn" data-filter="popular">
            <i class="fas fa-fire"></i>热门打卡点
        </button>
    </div>

    <!-- 校园地图 -->
    <div class="map-container fade-in">
        <img src="../assets/images/checkin/map/fzu-campus-map.jpg" alt="福大校园导览图" class="campus-map" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">

        <!-- 地图点位 -->
        <div class="map-point red-point" data-id="museum" data-name="校史馆" style="top: 43%; left: 82%;">
            <div class="map-point-pulse red-pulse"></div>
        </div>
        <div class="map-point red-point" data-id="marx" data-name="马克思主义学院红色教育基地" style="top: 38%; left: 81%;">
            <div class="map-point-pulse red-pulse"></div>
        </div>
        <div class="map-point blue-point" data-id="library" data-name="旗山校区图书馆" style="top: 38%; left: 61.5%;">
            <div class="map-point-pulse blue-pulse"></div>
        </div>
        <div class="map-point blue-point" data-id="fuyouge" data-name="福友阁" style="top: 68%; left: 53%;">
            <div class="map-point-pulse blue-pulse"></div>
        </div>
        <div class="map-point blue-point" data-id="stadium" data-name="宏晖文体馆" style="top: 63%; left: 33.5%;">
            <div class="map-point-pulse blue-pulse"></div>
        </div>
        <div class="map-point blue-point" data-id="windStadium" data-name="风雨操场" style="top: 52%; left: 28%;">
            <div class="map-point-pulse blue-pulse"></div>
        </div>
    </div>

    <!-- 打卡点列表 -->
    <div class="checkin-list">
        <!-- 每个打卡点卡片结构保持不变，但添加了checked-badge -->
        <!-- 校史馆 -->
        <div class="checkin-item fade-in" data-id="museum" data-type="red" data-popular="false">
            <span class="checkin-item-tag red">红色点位</span>
            <div class="checked-badge"><i class="fas fa-check-circle"></i> 已打卡</div>
            <div class="checkin-item-img-container">
                <img class="checkin-item-img" data-src="../assets/images/checkin/9history-museum.jpg" alt="福大校史馆" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
                <div class="checkin-item-img-overlay">
                    <div class="checkin-item-img-text"><i class="fas fa-search-plus"></i> 点击查看详情</div>
                </div>
            </div>
            <h3 class="checkin-item-title">校史馆（红色打卡点）</h3>
            <p class="checkin-item-desc">福大红色校史核心展示区，收藏大量建校以来的红色文物与史料，是传承红色基因的重要场所。</p>
            <div class="checkin-item-stats">
                <div class="stats-row">
                    <div class="stat-item checkins">
                        <i class="fas fa-users"></i>
                        <span class="stat-label-small">打卡数:</span>
                        <span class="stat-value-small" data-stat="checkins">1,845</span>
                    </div>
                    <div class="stat-item rate">
                        <i class="fas fa-chart-line"></i>
                        <span class="stat-label-small">打卡率:</span>
                        <span class="stat-value-small" data-stat="rate">61.5%</span>
                        <div class="rate-progress">
                            <div class="rate-progress-bar" data-rate="61.5"></div>
                        </div>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item rating">
                        <div class="stars" data-rating="4.8">
                            <!-- 星星由JS动态生成 -->
                        </div>
                    </div>
                    <div class="stat-item reviews">
                        <i class="fas fa-comment-dots"></i>
                        <span class="stat-label-small">评价:</span>
                        <span class="stat-value-small" data-stat="reviews">326</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 图书馆 -->
        <div class="checkin-item fade-in" data-id="library" data-type="normal" data-popular="true">
            <span class="checkin-item-tag normal">常规点位</span>
            <div class="checked-badge"><i class="fas fa-check-circle"></i> 已打卡</div>
            <div class="checkin-item-img-container">
                <img class="checkin-item-img" data-src="../assets/images/checkin/9library.jpg" alt="福大图书馆" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
                <div class="checkin-item-img-overlay">
                    <div class="checkin-item-img-text"><i class="fas fa-search-plus"></i> 点击查看详情</div>
                </div>
            </div>
            <h3 class="checkin-item-title">旗山校区图书馆</h3>
            <p class="checkin-item-desc">福建省最大的高校图书馆之一，兼具学习与人文景观价值，现代建筑风格与自然环境完美融合。</p>
            <div class="checkin-item-stats">
                <div class="stats-row">
                    <div class="stat-item checkins">
                        <i class="fas fa-users"></i>
                        <span class="stat-label-small">打卡数:</span>
                        <span class="stat-value-small" data-stat="checkins">2,432</span>
                    </div>
                    <div class="stat-item rate">
                        <i class="fas fa-chart-line"></i>
                        <span class="stat-label-small">打卡率:</span>
                        <span class="stat-value-small" data-stat="rate">81.1%</span>
                        <div class="rate-progress">
                            <div class="rate-progress-bar" data-rate="81.1"></div>
                        </div>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item rating">
                        <div class="stars" data-rating="4.6">
                            <!-- 星星由JS动态生成 -->
                        </div>
                    </div>
                    <div class="stat-item reviews">
                        <i class="fas fa-comment-dots"></i>
                        <span class="stat-label-small">评价:</span>
                        <span class="stat-value-small" data-stat="reviews">489</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 马克思主义学院红色教育基地 -->
        <div class="checkin-item fade-in" data-id="marx" data-type="red" data-popular="false">
            <span class="checkin-item-tag red">红色点位</span>
            <div class="checked-badge"><i class="fas fa-check-circle"></i> 已打卡</div>
            <div class="checkin-item-img-container">
                <img class="checkin-item-img" data-src="../assets/images/checkin/marx-center.jpg" alt="马克思主义学院红色教育基地" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
                <div class="checkin-item-img-overlay">
                    <div class="checkin-item-img-text"><i class="fas fa-search-plus"></i> 点击查看详情</div>
                </div>
            </div>
            <h3 class="checkin-item-title">马克思主义学院红色教育基地（红色打卡点）</h3>
            <p class="checkin-item-desc">集红色理论学习、实践体验于一体的教育平台，通过沉浸式体验让红色教育更生动鲜活。</p>
            <div class="checkin-item-stats">
                <div class="stats-row">
                    <div class="stat-item checkins">
                        <i class="fas fa-users"></i>
                        <span class="stat-label-small">打卡数:</span>
                        <span class="stat-value-small" data-stat="checkins">956</span>
                    </div>
                    <div class="stat-item rate">
                        <i class="fas fa-chart-line"></i>
                        <span class="stat-label-small">打卡率:</span>
                        <span class="stat-value-small" data-stat="rate">31.9%</span>
                        <div class="rate-progress">
                            <div class="rate-progress-bar" data-rate="31.9"></div>
                        </div>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item rating">
                        <div class="stars" data-rating="4.7">
                            <!-- 星星由JS动态生成 -->
                        </div>
                    </div>
                    <div class="stat-item reviews">
                        <i class="fas fa-comment-dots"></i>
                        <span class="stat-label-small">评价:</span>
                        <span class="stat-value-small" data-stat="reviews">187</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 福友阁 -->
        <div class="checkin-item fade-in" data-id="fuyouge" data-type="normal" data-popular="true">
            <span class="checkin-item-tag normal">常规点位</span>
            <div class="checked-badge"><i class="fas fa-check-circle"></i> 已打卡</div>
            <div class="checkin-item-img-container">
                <img class="checkin-item-img" data-src="../assets/images/checkin/fuyouge.jpg" alt="福友阁" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
                <div class="checkin-item-img-overlay">
                    <div class="checkin-item-img-text"><i class="fas fa-search-plus"></i> 点击查看详情</div>
                </div>
            </div>
            <h3 class="checkin-item-title">福友阁</h3>
            <p class="checkin-item-desc">福大标志性人文景观建筑，飞檐翘角古色古香，顶层观景台可360°俯瞰校园全景，是网红打卡圣地。</p>
            <div class="checkin-item-stats">
                <div class="stats-row">
                    <div class="stat-item checkins">
                        <i class="fas fa-users"></i>
                        <span class="stat-label-small">打卡数:</span>
                        <span class="stat-value-small" data-stat="checkins">3,125</span>
                    </div>
                    <div class="stat-item rate">
                        <i class="fas fa-chart-line"></i>
                        <span class="stat-label-small">打卡率:</span>
                        <span class="stat-value-small" data-stat="rate">100%</span>
                        <div class="rate-progress">
                            <div class="rate-progress-bar" data-rate="100"></div>
                        </div>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item rating">
                        <div class="stars" data-rating="4.9">
                            <!-- 星星由JS动态生成 -->
                        </div>
                    </div>
                    <div class="stat-item reviews">
                        <i class="fas fa-comment-dots"></i>
                        <span class="stat-label-small">评价:</span>
                        <span class="stat-value-small" data-stat="reviews">612</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 宏晖文体馆 -->
        <div class="checkin-item fade-in" data-id="stadium" data-type="normal" data-popular="true">
            <span class="checkin-item-tag normal">常规点位</span>
            <div class="checked-badge"><i class="fas fa-check-circle"></i> 已打卡</div>
            <div class="checkin-item-img-container">
                <img class="checkin-item-img" data-src="../assets/images/checkin/stadium.jpg" alt="宏晖文体馆" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
                <div class="checkin-item-img-overlay">
                    <div class="checkin-item-img-text"><i class="fas fa-search-plus"></i> 点击查看详情</div>
                </div>
            </div>
            <h3 class="checkin-item-title">宏晖文体馆</h3>
            <p class="checkin-item-desc">福大现代化综合性文体场馆，集体育赛事、文艺演出、师生健身于一体，建筑外观简洁大气，是校园活力地标。</p>
            <div class="checkin-item-stats">
                <div class="stats-row">
                    <div class="stat-item checkins">
                        <i class="fas fa-users"></i>
                        <span class="stat-label-small">打卡数:</span>
                        <span class="stat-value-small" data-stat="checkins">1,742</span>
                    </div>
                    <div class="stat-item rate">
                        <i class="fas fa-chart-line"></i>
                        <span class="stat-label-small">打卡率:</span>
                        <span class="stat-value-small" data-stat="rate">58.1%</span>
                        <div class="rate-progress">
                            <div class="rate-progress-bar" data-rate="58.1"></div>
                        </div>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item rating">
                        <div class="stars" data-rating="4.4">
                            <!-- 星星由JS动态生成 -->
                        </div>
                    </div>
                    <div class="stat-item reviews">
                        <i class="fas fa-comment-dots"></i>
                        <span class="stat-label-small">评价:</span>
                        <span class="stat-value-small" data-stat="reviews">278</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 风雨操场 -->
        <div class="checkin-item fade-in" data-id="windStadium" data-type="normal" data-popular="true">
            <span class="checkin-item-tag normal">常规点位</span>
            <div class="checked-badge"><i class="fas fa-check-circle"></i> 已打卡</div>
            <div class="checkin-item-img-container">
                <img class="checkin-item-img" data-src="../assets/images/checkin/wind-stadium.jpg" alt="风雨操场" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
                <div class="checkin-item-img-overlay">
                    <div class="checkin-item-img-text"><i class="fas fa-search-plus"></i> 点击查看详情</div>
                </div>
            </div>
            <h3 class="checkin-item-title">风雨操场</h3>
            <p class="checkin-item-desc">校园核心户外运动场，配备标准塑胶跑道、足球场及多功能运动区，全天候开放，是师生运动健身的首选场所。</p>
            <div class="checkin-item-stats">
                <div class="stats-row">
                    <div class="stat-item checkins">
                        <i class="fas fa-users"></i>
                        <span class="stat-label-small">打卡数:</span>
                        <span class="stat-value-small" data-stat="checkins">2,013</span>
                    </div>
                    <div class="stat-item rate">
                        <i class="fas fa-chart-line"></i>
                        <span class="stat-label-small">打卡率:</span>
                        <span class="stat-value-small" data-stat="rate">67.1%</span>
                        <div class="rate-progress">
                            <div class="rate-progress-bar" data-rate="67.1"></div>
                        </div>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item rating">
                        <div class="stars" data-rating="4.5">
                            <!-- 星星由JS动态生成 -->
                        </div>
                    </div>
                    <div class="stat-item reviews">
                        <i class="fas fa-comment-dots"></i>
                        <span class="stat-label-small">评价:</span>
                        <span class="stat-value-small" data-stat="reviews">345</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 返回首页 -->
    <a href="homepage.html" class="btn btn-red fade-in" id="returnBtn">
        <i class="fas fa-arrow-left"></i>返回首页
    </a>
</div>

<!-- 详情弹窗 -->
<div class="modal-overlay" id="modalOverlay"></div>
<div class="modal" id="checkinModal">
    <div class="modal-header">
        <h3 class="modal-title" id="modalTitle"><i class="fas fa-info-circle"></i></h3>
        <button class="close-btn" id="closeModal">
            <span>&times;</span>
        </button>
    </div>
    <div class="modal-content">
        <div class="modal-img-container">
            <span class="modal-img-badge" id="modalBadge"></span>
            <img class="modal-img" id="modalImg" alt="" onerror="this.onerror=null; this.src='../assets/images/default-img.jpg';">
        </div>

        <!-- 弹窗统计信息 -->
        <div class="modal-stats" id="modalStats">
            <!-- 动态生成统计信息 -->
        </div>

        <div class="modal-detail">
            <p class="modal-desc" id="modalDesc"></p>

            <div class="modal-info">
                <div class="modal-info-item">
                    <i class="far fa-clock"></i>
                    <div>
                        <strong>开放时间</strong>
                        <span id="modalTime"></span>
                    </div>
                </div>
                <div class="modal-info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                        <strong>地址位置</strong>
                        <span id="modalLocation"></span>
                    </div>
                </div>
            </div>

            <div class="modal-tip">
                <i class="fas fa-lightbulb"></i>
                <div>
                    <strong>打卡小贴士：</strong>
                    <span id="modalTip"></span>
                </div>
            </div>
        </div>
        <button class="checkin-btn" id="modalCheckinBtn" data-id="">
            <i class="fas fa-check-circle"></i>
            <span id="modalCheckinText">标记已打卡</span>
        </button>
    </div>
</div>

<!-- 脚本 -->
<script>
    // 增强的打卡点详细数据
    const checkinData = {
        museum: {
            title: "校史馆（红色打卡点）",
            badge: "红色点位",
            img: "../assets/images/checkin/history-museum.jpg",
            desc: "福大红色校史核心展示区，收藏大量建校以来的红色文物与史料。馆内通过文字、图片、实物、多媒体等多种形式，展现福大在不同历史时期的红色基因与办学成就，系统展示了学校从创办至今的发展历程、重大事件、杰出校友事迹等，是了解福大红色文化、传承革命精神的必去之地。",
            time: "周一至周五 9:00-17:00（16:30停止入场），周六周日闭馆（法定节假日除外）",
            location: "旗山校区北区行政楼旁",
            tip: "参观需携带学生证/校园卡，团体参观（10人以上）需提前1天联系校史馆预约；馆内部分区域禁止拍照，请注意遵守参观规定。",
            type: "red",
            popular: false,
            stats: {
                checkins: 1845,
                rate: 61.5,
                rating: 4.8,
                reviews: 326
            }
        },
        library: {
            title: "旗山校区图书馆",
            badge: "常规点位",
            img: "../assets/images/checkin/library.jpg",
            desc: "福建省最大的高校图书馆之一，总建筑面积5.6万平方米，馆藏纸质图书近300万册，电子图书资源丰富。图书馆建筑风格现代大气，采用玻璃幕墙设计，采光充足，内部设有多个阅览区、研讨室、电子阅览室等功能区域。中庭的挑高设计和绿植装饰营造出舒适的阅读环境，不仅是学习科研的理想场所，其中庭、露台等区域也是校园网红打卡点。",
            time: "周一至周日 7:30-22:00（寒暑假开放时间调整，详见图书馆通知）",
            location: "旗山校区中心区域，思勰湖旁",
            tip: "进入图书馆需刷校园卡，馆内禁止喧哗，拍照时请勿使用闪光灯；建议避开考试周高峰期前往打卡，体验更佳。",
            type: "normal",
            popular: true,
            stats: {
                checkins: 2432,
                rate: 81.1,
                rating: 4.6,
                reviews: 489
            }
        },
        marx: {
            title: "马克思主义学院红色教育基地（红色打卡点）",
            badge: "红色点位",
            img: "../assets/images/checkin/marx-center.jpg",
            desc: "集红色理论学习、实践体验于一体的教育平台，传播马克思主义真理力量。基地内设有红色书屋、VR红色体验区、党史学习展厅、理论研讨室等多个功能区域，通过沉浸式体验、互动教学等创新方式，让红色教育更生动、更具感染力，是开展爱国主义教育和思想政治教育的重要基地。",
            time: "周一至周五 10:00-16:00，需提前通过马克思主义学院官网预约",
            location: "旗山校区水利馆旁文科楼区域",
            tip: "VR体验项目需单独预约，建议穿舒适衣物，体验时长约30分钟；基地内提供免费讲解服务，可提前咨询预约。",
            type: "red",
            popular: false,
            stats: {
                checkins: 956,
                rate: 31.9,
                rating: 4.7,
                reviews: 187
            }
        },
        fuyouge: {
            title: "福友阁",
            badge: "常规点位",
            img: "../assets/images/checkin/fuyouge.jpg",
            desc: "福大标志性人文景观建筑，始建于2008年，采用传统中式风格设计，飞檐翘角、雕梁画栋，尽显古典韵味。阁楼共三层，一层为休闲区，二层设有展览，顶层为观景台，可360°俯瞰旗山校区全景，将思勰湖、教学楼、体育场等校园风光尽收眼底。作为校园内最受欢迎的拍照打卡点之一，这里也是师生休闲、交流、举办文化活动的重要场所。",
            time: "全天开放（夜间灯光开放时间：18:00-22:00）",
            location: "旗山校区翠微湖旁",
            tip: "最佳拍照时间为清晨（无人群干扰）或夜间（灯光亮起时），阁楼内禁止攀爬、喧哗，建议穿舒适鞋子前往；节假日期间人流量较大，可错峰前往。",
            type: "normal",
            popular: true,
            stats: {
                checkins: 3125,
                rate: 100,
                rating: 4.9,
                reviews: 612
            }
        },
        stadium: {
            title: "宏晖文体馆",
            badge: "常规点位",
            img: "../assets/images/checkin/stadium.jpg",
            desc: "福大现代化综合性文体场馆，总建筑面积约2.8万平方米，是校园内规模最大的体育文化活动中心。场馆外观采用流线型设计，简洁大气且富有动感，内部设有标准篮球场、羽毛球场、游泳馆、健身房、演艺厅等多个功能区域，既能满足日常教学、训练需求，也能承办各类大型体育赛事、文艺演出和校园活动。场馆周边绿化良好，与南侧操场相连，是展现校园活力与运动精神的标志性建筑。",
            time: "周一至周五 6:30-22:00，周六至周日 8:00-21:00（部分区域需提前预约，赛事期间可能临时关闭）",
            location: "旗山校区南区操场右侧（近学生宿舍19-22号楼）",
            tip: "进入场馆需刷校园卡，运动区域需穿运动鞋；游泳馆、健身房等需单独预约并遵守相关规定；场馆东侧入口处的弧形走廊是拍照打卡热门位置，下午4-5点光线最佳。",
            type: "normal",
            popular: true,
            stats: {
                checkins: 1742,
                rate: 58.1,
                rating: 4.4,
                reviews: 278
            }
        },
        windStadium: {
            title: "风雨操场",
            badge: "常规点位",
            img: "../assets/images/checkin/wind-stadium.jpg",
            desc: "福大校园核心户外运动场，总占地面积约8000平方米，是师生日常运动、体育教学和校园体育活动的核心场所。操场配备400米标准塑胶跑道、天然草坪足球场、多功能球类运动区（含篮球、排球、羽毛球场地），并设有观众看台和休息长廊。因场地设有防雨遮阳设施，可全天候开放使用，无论是清晨晨跑、课间体育锻炼，还是周末社团活动、体育赛事，都能满足需求。操场周边绿植环绕，视野开阔，是展现校园运动氛围和青春活力的重要打卡点。",
            time: "周一至周日 6:00-22:00（特殊赛事或场地维护期间除外，详见现场通知）",
            location: "旗山校区西侧运动区（近学生宿舍10-15号楼）",
            tip: "进入操场需穿运动鞋，禁止携带尖锐物品或宠物入内；跑道内侧为足球场，请勿随意踩踏草坪；傍晚时分（17:00-18:30）光线柔和，适合拍摄运动风打卡照片；运动前建议做好热身，避免受伤。",
            type: "normal",
            popular: true,
            stats: {
                checkins: 2013,
                rate: 67.1,
                rating: 4.5,
                reviews: 345
            }
        }
    };

    // DOM元素
    const modal = document.getElementById('checkinModal');
    const modalOverlay = document.getElementById('modalOverlay');
    const closeModalBtn = document.getElementById('closeModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBadge = document.getElementById('modalBadge');
    const modalImg = document.getElementById('modalImg');
    const modalDesc = document.getElementById('modalDesc');
    const modalTime = document.getElementById('modalTime');
    const modalLocation = document.getElementById('modalLocation');
    const modalTip = document.getElementById('modalTip');
    const modalStats = document.getElementById('modalStats');
    const modalCheckinBtn = document.getElementById('modalCheckinBtn');
    const modalCheckinText = document.getElementById('modalCheckinText');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const checkinItems = document.querySelectorAll('.checkin-item');
    const mapPoints = document.querySelectorAll('.map-point');
    const lazyImages = document.querySelectorAll('.checkin-item-img');
    const fadeElements = document.querySelectorAll('.fade-in');
    const totalPointsEl = document.getElementById('totalPoints');
    const checkedPointsEl = document.getElementById('checkedPoints');
    const checkinRateEl = document.getElementById('checkinRate');
    const popularPlaceEl = document.getElementById('popularPlace');
    const returnBtn = document.getElementById('returnBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const pageTransition = document.getElementById('pageTransition');
    const particlesContainer = document.getElementById('particlesContainer');

    // 粒子效果
    function createParticles() {
        const colors = [
            'rgba(220, 53, 69, 0.3)',
            'rgba(0, 123, 255, 0.3)',
            'rgba(40, 167, 69, 0.3)',
            'rgba(255, 193, 7, 0.3)',
            'rgba(111, 66, 193, 0.3)'
        ];

        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';

            // 随机属性
            const size = Math.random() * 10 + 5;
            const color = colors[Math.floor(Math.random() * colors.length)];
            const left = Math.random() * 100;
            const animationDuration = Math.random() * 20 + 10;
            const animationDelay = Math.random() * 10;

            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.background = color;
            particle.style.left = `${left}%`;
            particle.style.animationDuration = `${animationDuration}s`;
            particle.style.animationDelay = `${animationDelay}s`;

            particlesContainer.appendChild(particle);
        }
    }

    // 添加水波纹效果
    function createRipple(event) {
        const button = event.currentTarget;
        const ripple = document.createElement('span');
        const rect = button.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = event.clientX - rect.left - size / 2;
        const y = event.clientY - rect.top - size / 2;

        ripple.style.width = ripple.style.height = `${size}px`;
        ripple.style.left = `${x}px`;
        ripple.style.top = `${y}px`;
        ripple.className = 'ripple';

        button.appendChild(ripple);

        setTimeout(() => {
            ripple.remove();
        }, 600);
    }

    // 数字滚动动画
    function animateNumber(element, target, duration = 1500) {
        const start = 0;
        const increment = target / (duration / 16);
        let current = start;

        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                element.textContent = target;
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(current);
            }
        }, 16);
    }

    // 更新统计概览
    function updateStatsOverview() {
        // 总点数
        const totalPoints = checkinItems.length;
        animateNumber(totalPointsEl, totalPoints);

        // 已打卡点数
        const checkedIds = JSON.parse(localStorage.getItem('fzuCheckinIds') || '[]');
        animateNumber(checkedPointsEl, checkedIds.length);

        // 打卡率
        const rate = Math.round((checkedIds.length / totalPoints) * 100);
        animateNumber(checkinRateEl, rate);

        // 最受欢迎点位（打卡数最多的）
        let maxCheckins = 0;
        let popularPlace = '福友阁';

        for (const id in checkinData) {
            if (checkinData[id].stats.checkins > maxCheckins) {
                maxCheckins = checkinData[id].stats.checkins;
                popularPlace = checkinData[id].title.replace(/（.*）/, '');
            }
        }

        popularPlaceEl.textContent = popularPlace;
    }

    // 初始化：读取本地存储的打卡状态
    function initCheckinStatus() {
        const checkedIds = JSON.parse(localStorage.getItem('fzuCheckinIds') || '[]');
        checkedIds.forEach(id => {
            // 更新卡片状态
            const item = document.querySelector(`.checkin-item[data-id="${id}"]`);
            if (item) {
                item.classList.add('checked');
                const badge = item.querySelector('.checked-badge');
                if (badge) badge.style.opacity = '1';
            }
            // 更新弹窗按钮状态
            if (modalCheckinBtn.dataset.id === id) {
                modalCheckinBtn.classList.add('checked');
                modalCheckinText.textContent = '已打卡 ✓';
            }
        });

        // 更新统计概览
        updateStatsOverview();
    }

    // 初始化星星评分显示
    function initStarRatings() {
        const starsContainers = document.querySelectorAll('.stars');

        starsContainers.forEach(container => {
            const rating = parseFloat(container.dataset.rating);
            container.innerHTML = generateStarsHTML(rating, 16);
        });

        // 初始化进度条
        const progressBars = document.querySelectorAll('.rate-progress-bar');
        progressBars.forEach(bar => {
            const rate = parseFloat(bar.dataset.rate);
            setTimeout(() => {
                bar.style.width = rate + '%';
            }, 300);
        });
    }

    // 生成星星HTML
    function generateStarsHTML(rating, size = 20) {
        let starsHTML = '';
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        const remaining = 5 - fullStars - (hasHalfStar ? 1 : 0);

        // 添加满星
        for (let i = 0; i < fullStars; i++) {
            starsHTML += `<span class="star filled" style="font-size: ${size}px">★</span>`;
        }

        // 添加半星
        if (hasHalfStar) {
            starsHTML += `<span class="star half-filled" style="font-size: ${size}px">★</span>`;
        }

        // 添加空星
        for (let i = 0; i < remaining; i++) {
            starsHTML += `<span class="star" style="font-size: ${size}px">★</span>`;
        }

        // 添加评分值
        starsHTML += `<span class="rating-value">${rating.toFixed(1)}</span>`;
        return starsHTML;
    }

    // 图片懒加载
    function initLazyLoad() {
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        const src = img.dataset.src;
                        if (src) {
                            img.src = src;
                            img.removeAttribute('data-src');
                        }
                        imageObserver.unobserve(img);
                    }
                });
            }, { rootMargin: '100px' });

            lazyImages.forEach(img => {
                if (img.dataset.src) {
                    imageObserver.observe(img);
                }
            });
        }
    }

    // 滚动动画：元素进入视口时显示
    function initScrollAnimation() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });

        fadeElements.forEach(element => {
            observer.observe(element);
        });
    }

    // 筛选打卡点
    function initFilter() {
        filterBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                createRipple(e);

                // 更新按钮激活状态
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const filterType = btn.dataset.filter;

                // 筛选卡片
                checkinItems.forEach(item => {
                    const show = filterType === 'all' ||
                        (filterType === 'red' && item.dataset.type === 'red') ||
                        (filterType === 'normal' && item.dataset.type === 'normal') ||
                        (filterType === 'popular' && item.dataset.popular === 'true');

                    if (show) {
                        item.style.display = 'flex';
                        setTimeout(() => {
                            item.style.opacity = '1';
                            item.style.transform = 'translateY(0) rotateX(0deg)';
                        }, 50);
                    } else {
                        item.style.opacity = '0';
                        item.style.transform = 'translateY(30px) rotateX(10deg)';
                        setTimeout(() => {
                            item.style.display = 'none';
                        }, 300);
                    }
                });
            });
        });
    }

    // 生成弹窗统计信息HTML
    function generateModalStatsHTML(id) {
        const data = checkinData[id];
        if (!data || !data.stats) return '';

        return `
                <div class="modal-stat-item checkins">
                    <div class="modal-stat-value">${data.stats.checkins.toLocaleString()}</div>
                    <div class="modal-stat-label">打卡人数</div>
                </div>
                <div class="modal-stat-item rate">
                    <div class="modal-stat-value">${data.stats.rate}%</div>
                    <div class="modal-stat-label">打卡率</div>
                </div>
                <div class="modal-stat-item rating">
                    <div class="modal-stat-value">${data.stats.rating.toFixed(1)}</div>
                    <div class="modal-stat-label">评分</div>
                    <div class="modal-rating-stars">
                        ${generateStarsHTML(data.stats.rating, 24)}
                    </div>
                </div>
                <div class="modal-stat-item reviews">
                    <div class="modal-stat-value">${data.stats.reviews}</div>
                    <div class="modal-stat-label">评价人数</div>
                </div>
            `;
    }

    // 打开弹窗
    function openModal(id) {
        const data = checkinData[id];
        if (!data) return;

        // 填充弹窗数据
        modalTitle.innerHTML = `<i class="fas fa-info-circle"></i>${data.title}`;
        modalBadge.textContent = data.badge;
        modalBadge.className = 'modal-img-badge';
        modalBadge.classList.add(data.type === 'normal' ? 'blue-badge' : 'red-badge');
        modalImg.src = data.img;
        modalDesc.textContent = data.desc;
        modalTime.textContent = data.time;
        modalLocation.textContent = data.location;
        modalTip.textContent = data.tip;
        modalCheckinBtn.dataset.id = id;

        // 填充统计信息
        modalStats.innerHTML = generateModalStatsHTML(id);

        // 更新弹窗打卡按钮状态
        const checkedIds = JSON.parse(localStorage.getItem('fzuCheckinIds') || '[]');
        if (checkedIds.includes(id)) {
            modalCheckinBtn.classList.add('checked');
            modalCheckinText.textContent = '已打卡 ✓';
        } else {
            modalCheckinBtn.classList.remove('checked');
            modalCheckinText.textContent = '标记已打卡';
        }

        // 显示弹窗
        setTimeout(() => {
            modalOverlay.classList.add('active');
            setTimeout(() => {
                modal.classList.add('active');
            }, 50);
        }, 0);
        document.body.style.overflow = 'hidden';
    }

    // 关闭弹窗
    function closeModal() {
        modal.classList.remove('active');
        setTimeout(() => {
            modalOverlay.classList.remove('active');
        }, 300);
        document.body.style.overflow = '';
    }

    // 打卡功能
    function initCheckin() {
        modalCheckinBtn.addEventListener('click', (e) => {
            createRipple(e);

            const id = modalCheckinBtn.dataset.id;
            if (!id) return;

            let checkedIds = JSON.parse(localStorage.getItem('fzuCheckinIds') || '[]');
            const isChecked = checkedIds.includes(id);

            if (isChecked) {
                // 取消打卡
                checkedIds = checkedIds.filter(item => item !== id);
                modalCheckinBtn.classList.remove('checked');
                modalCheckinText.textContent = '标记已打卡';

                const item = document.querySelector(`.checkin-item[data-id="${id}"]`);
                if (item) {
                    item.classList.remove('checked');
                    const badge = item.querySelector('.checked-badge');
                    if (badge) badge.style.opacity = '0';
                }
            } else {
                // 标记打卡
                checkedIds.push(id);
                modalCheckinBtn.classList.add('checked');
                modalCheckinText.textContent = '已打卡 ✓';

                const item = document.querySelector(`.checkin-item[data-id="${id}"]`);
                if (item) {
                    item.classList.add('checked');
                    const badge = item.querySelector('.checked-badge');
                    if (badge) badge.style.opacity = '1';
                }

                // 打卡成功提示
                createToast('打卡成功！', 'success');
            }

            // 保存到本地存储
            localStorage.setItem('fzuCheckinIds', JSON.stringify(checkedIds));

            // 更新统计概览
            updateStatsOverview();
        });
    }

    // 创建提示消息
    function createToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.style.cssText = `
                position: fixed;
                bottom: 30px;
                left: 50%;
                transform: translateX(-50%) translateY(100px);
                background: ${type === 'success' ? 'linear-gradient(135deg, #28a745, #20c997)' : 'linear-gradient(135deg, #dc3545, #c82333)'};
                color: #fff;
                padding: 15px 30px;
                border-radius: 25px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10000;
                transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                display: flex;
                align-items: center;
                gap: 10px;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
                opacity: 0;
            `;
        toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <span>${message}</span>
            `;
        document.body.appendChild(toast);

        // 显示动画
        setTimeout(() => {
            toast.style.opacity = '1';
            toast.style.transform = 'translateX(-50%) translateY(0)';
        }, 10);

        // 隐藏动画
        setTimeout(() => {
            toast.style.opacity = '0';
            toast.style.transform = 'translateX(-50%) translateY(-100px)';
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 500);
        }, 3000);
    }

    // 绑定点击事件
    function bindEvents() {
        // 卡片点击打开弹窗
        checkinItems.forEach(item => {
            item.addEventListener('click', (e) => {
                if (!e.target.closest('.checked-badge')) {
                    const id = item.dataset.id;
                    openModal(id);
                }
            });
        });

        // 地图点位点击打开弹窗
        mapPoints.forEach(point => {
            point.addEventListener('click', () => {
                const id = point.dataset.id;
                openModal(id);
            });
        });

        // 关闭弹窗
        closeModalBtn.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', closeModal);

        // 阻止弹窗内容点击冒泡
        modal.addEventListener('click', (e) => e.stopPropagation());

        // 键盘ESC关闭弹窗
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                closeModal();
            }
        });

        // 返回按钮点击效果
        returnBtn.addEventListener('click', (e) => {
            e.preventDefault();
            pageTransition.classList.add('active');
            setTimeout(() => {
                window.location.href = returnBtn.href;
            }, 600);
        });

        // 为所有按钮添加水波纹效果
        document.querySelectorAll('button, .btn-red').forEach(btn => {
            btn.addEventListener('click', createRipple);
        });
    }

    // 初始化页面
    function initPage() {
        // 隐藏加载动画
        setTimeout(() => {
            loadingOverlay.style.opacity = '0';
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 250);
        }, 500);

        // 初始化各种功能
        initLazyLoad();
        initCheckinStatus();
        initStarRatings();
        initFilter();
        initCheckin();
        bindEvents();
        initScrollAnimation();
        createParticles();
    }

    // 页面加载完成后初始化
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPage);
    } else {
        initPage();
    }
</script>
<script src="../js/common.js"></script>
</body>
</html>